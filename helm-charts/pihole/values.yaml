replicaCount: 1

image:
  repository: pihole/pihole
  tag: latest
  pullPolicy: IfNotPresent

timezone: "Europe/London"
adminPassword: "correct horse battery staple"

# CHANGED TO FALSE: Let Ingress handle the web traffic
hostNetwork: false

# Pi-hole v6 specific: Allow the pi.hole hostname
extraEnv:
  # This is the "Nuclear" option for Pi-hole v6 security
  FTLCONF_webserver_api_allowedHosts: "*"
  # This ensures it knows it's behind a proxy
  FTLCONF_webserver_api_trustedProxies: "10.42.0.0/16,10.43.0.0/16,192.168.1.0/24"

persistence:
  storageClass: "local-path"
  pihole:
    size: 2Gi
  dnsmasq:
    size: 1Gi

service:
  dnsUdpPort: 30053
  dnsTcpPort: 30054
  webPort: 80 # Internal container port
  httpsPort: 443

ingress:
  enabled: true
  className: nginx
  annotations:
    # This helps with the Pi-hole v6 admin pathing
    nginx.ingress.kubernetes.io/app-root: /admin
  hosts:
    - host: pi.hole
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: pihole-tls-secret
      hosts:
        - pi.hole