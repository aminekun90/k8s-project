replicaCount: 1

image:
  repository: pihole/pihole
  tag: latest
  pullPolicy: IfNotPresent

timezone: "Europe/London"
adminPassword: "correct horse battery staple"

hostNetwork: true

extraEnv:
  # v6.4+ Correct Syntax (Matches the [dns] and [webserver] sections)
  FTLCONF_dns_listeningMode: "all"
  FTLCONF_dns_hostRecord: "false"
  
  # This replaces 'allowedHosts: *' and fixes the 404
  FTLCONF_webserver_serve_all: "true"
  
  # v6.4+ Trusted Proxies syntax
  FTLCONF_webserver_api_trustedProxies: "10.0.0.0/8,172.16.0.0/12,192.168.0.0/16"

securityContext:
  privileged: true
  capabilities:
    add: ["NET_ADMIN", "SYS_TIME", "SYS_NICE", "CHOWN"]

persistence:
  storageClass: "local-path"
  pihole:
    size: 2Gi
  dnsmasq:
    size: 1Gi

service:
  type: ClusterIP
  webPort: 80 

ingress:
  enabled: true
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
    nginx.ingress.kubernetes.io/upstream-vhost: "pi.hole"
  hosts:
    - host: pi.hole
      paths:
        - path: /
          pathType: Prefix